{"version":3,"sources":["webpack:///webpack/bootstrap 033be4526df334f2ef13","webpack:///./client/src/client.cjsx","webpack:///./client/src/styles/global.less","webpack:///./client/src/components/FilesPanel.cjsx","webpack:///./client/src/styles/filesPanel.less","webpack:///./client/src/components/DirItem.cjsx","webpack:///./client/src/components/FileItem.cjsx","webpack:///./client/src/components/ImageItem.cjsx","webpack:///./client/src/components/DetailPanel.cjsx","webpack:///./client/src/styles/detailPanel.less","webpack:///./client/src/styles/menus.less","webpack:///./client/src/components/ContextMenu.cjsx","webpack:///./client/src/FileUploadManager.coffee","webpack:///./client/src/Uploader.coffee"],"names":[],"mappings":"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","file":"./client/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 033be4526df334f2ef13\n **/","require './styles/global.less'\n\n#components\nFilesPanel = require './components/FilesPanel'\n#modules\nFileUploadManager = require './FileUploadManager'\n\n#关于components方法的命名\n#\n# - 用于交付给子组件触发的 props.interface 采用 on 开头的命名\n#   如： <ChildItem onEvent={xxx}>\n#\n# - 用于处理 props.interface 的方法采用 handle 开头的命名\n#   如： <ChildItem onEvent={@handleItemEvent}>\n#   如果可以直接调用已经存在的, 则允许直接调用公开方法\n#   如： <RefreshBtn onClick={@refresh}>\n#\n# - 其他自定义public方法命名随意, 但是不可以和上面两条冲突\n#\n# - 其他自定义private方法 (除了上三条之外的private方法) 以下划线开头\n\n\nclass DungeonClient extends Suzaku.EventEmitter\n  constructor:()->\n    super\n    @uploadManager = new FileUploadManager this\n\n    window.addEventListener \"dragover\",(e)=>\n      console.log \"over\"\n      e.preventDefault()\n    window.addEventListener \"dragleave\",(e)=>\n      console.log \"leave\"\n      e.preventDefault()\n    window.addEventListener \"drop\",(e)=>\n      e.stopPropagation()\n      e.preventDefault()\n      currentDir = @filesPanel.state.currentDir\n      dt = e.dataTransfer\n      if dt.files.length > 0\n        @uploadManager.handleDragFiles currentDir,dt.files\n        @emit \"uploading\"\n      else if dt.getData('text/html')\n        @uploadManager.handleDragHtml currentDir,dt.getData('text/html')\n        @emit \"uploading\"\n      else\n        console.log \"drop event unhandled\"\n\n    @uploadManager.on \"fileUploaded\",=>\n      @filesPanel.listDir()\n\n    @filesPanel = ReactDOM.render React.createElement(FilesPanel, {\"client\": (this)}),$(\"#main-container\")[0]\n\n    console.log \"inited Dungeon client\"\n\nnew DungeonClient()\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/cjsx-loader!./client/src/client.cjsx\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./client/src/styles/global.less\n ** module id = 1\n ** module chunks = 0\n **/","require '../styles/filesPanel.less'\n\nDirItem = require './DirItem'\nFileItem = require './FileItem'\nImageItem = require './ImageItem'\nDetailPanel = require './DetailPanel'\nContextMenu = require './ContextMenu'\n\nmodule.exports =\n  class FilesPanel extends React.Component\n    @FileTypes:\n      dir:\"directory\"\n      image:\"image\"\n      video:\"video\"\n      compressed:\"compressed\"\n      others:\"others\"\n\n    constructor:()->\n      super\n      @state =\n        currentDir:\"/\"\n        items:[]\n        error:false\n        dirStack:[]\n        message:'loading'\n      @props.client.on \"uploading\",=>\n        @setState message:\"uploading\"\n\n    listDir:->\n      $.get \"/listDir#{@state.currentDir}\",(data)=>\n        console.log \"got list data\",data\n        data.items.sort (a,b)->\n          #sort with name, dirs before files\n          (b.isDirectory - a.isDirectory) ||\n          (a.name.charCodeAt(0) - b.name.charCodeAt(0))\n        if data.items.length is 0\n          message = 'empty'\n        else\n          message = null\n        @setState {items:data.items, message:message}\n      .fail (e)=>\n        console.log \"error\",e\n        @setState {error:true, message:'error'}\n\n    changeDir:({newDir})->\n      dirStack = @state.dirStack.map (d)-> d\n      dirStack.push @state.currentDir\n      @setState {currentDir:newDir,dirStack:dirStack,message:'loading'},=>\n        @listDir()\n\n    goBack:->\n      # go back\n      dirStack = @state.dirStack.map (d)-> d\n      return if dirStack.length is 0\n      dir = dirStack.pop()\n      @setState {currentDir:dir,dirStack:dirStack,message:\"loading\"},=>\n        @listDir()\n\n    refresh:->\n      @setState {message:\"loading\"}\n      @listDir()\n\n    componentDidMount:->\n      @listDir()\n\n    showDetail:({itemType,itemData})->\n      @refs.detailPanel.showDetail itemType,itemData\n\n    onMenuItemClick:({key,itemData})->\n      action = key\n      @refs[itemData.relativePath].doFileAction action\n\n    handleItemEvent:(event,data)->\n      if data.itemData\n        data.itemType = @getItemType data.itemData\n      switch event\n        when 'enterDir'\n          @changeDir data\n        when 'showDetail'\n          @showDetail data\n        when 'showContextMenu'\n          @refs.contextMenu.show data\n        when 'update'\n          @refresh()\n        else\n          console.error \"unsupported event type!\",event\n\n    getItemType:(itemData)->\n      ft = FilesPanel.FileTypes\n      if itemData.isDirectory\n        return ft.dir\n      extName = itemData.name.split(\".\").pop()\n      switch extName\n        when \"jpg\",\"jpeg\",\"png\"\n          ft.image\n        else\n          ft.others\n\n    render:->\n      React.createElement(\"section\", {\"className\": \"files-panel\"},\n        React.createElement(DetailPanel, {\"ref\": \"detailPanel\"}),\n        React.createElement(ContextMenu, {\"ref\": \"contextMenu\", \"onItemClick\": (@onMenuItemClick.bind(@))}),\n        React.createElement(\"header\", {\"className\": \"main-header\"},\n          React.createElement(\"button\", {\"onClick\": (@refresh.bind(@))}, \"刷新\"),\n          React.createElement(\"button\", {\"onClick\": (@goBack.bind(@))}, \"后退\"),\n          React.createElement(\"span\", {\"className\": \"current-path\"}, (@state.currentDir))\n        ),\n        React.createElement(\"div\", {\"className\": \"files-holder\"},\n          (\n            if @state.message\n              React.createElement(\"span\", {\"className\": \"message-holder\"}, (\n                switch @state.message\n                  when \"loading\"\n                    \"载入中\"\n                  when \"error\"\n                    \"载入错误\"\n                  when \"empty\"\n                    \"没有文件\"\n                  when \"uploading\"\n                    \"上传中...\"\n              ))\n          ),\n          (\n            ft = FilesPanel.FileTypes\n            for item in @state.items\n              switch @getItemType item\n                when ft.dir\n                  React.createElement(DirItem, {\"key\": (item.relativePath),  \\\n                    \"ref\": (item.relativePath), \"data\": (item),  \\\n                    \"onEvent\": (@handleItemEvent.bind(@))})\n                when ft.image\n                  React.createElement(ImageItem, {\"key\": (item.relativePath),  \\\n                    \"ref\": (item.relativePath), \"data\": (item),  \\\n                    \"onEvent\": (@handleItemEvent.bind(@))})\n                else\n                  React.createElement(FileItem, {\"key\": (item.relativePath),  \\\n                    \"ref\": (item.relativePath), \"data\": (item),  \\\n                    \"onEvent\": (@handleItemEvent.bind(@))})\n          )\n        )\n      )\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/cjsx-loader!./client/src/components/FilesPanel.cjsx\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./client/src/styles/filesPanel.less\n ** module id = 6\n ** module chunks = 0\n **/","require '../styles/filesPanel.less'\nFileItem = require './FileItem'\n\nmodule.exports =\n  class DirItem extends FileItem\n    handleClick:(e)->\n      @props.onEvent \"enterDir\",{newDir:@props.data.relativePath}\n\n    render:->\n      React.createElement(\"div\", {\"className\": \"file-panel-item dir-item\",  \\\n        \"onClick\": (@handleClick.bind(@)),  \\\n        \"onContextMenu\": (@handleContextMenu.bind(@))},\n\n        React.createElement(\"div\", {\"className\": \"icon\"},\n          React.createElement(\"span\", {\"className\": \"preview\"})\n        ),\n        React.createElement(\"p\", {\"className\": \"name\", \"tilte\": (@props.data.name)}, (@props.data.name))\n\n      )\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/cjsx-loader!./client/src/components/DirItem.cjsx\n **/","require '../styles/filesPanel.less'\n\nmodule.exports =\n  class FileItem extends React.Component\n    contextMenuItems:['download','saveAs','rename','delete']\n\n    doFileAction:(action)->\n      switch action\n        when 'download'\n          console.log \"download\"\n        when 'saveAs'\n          console.log \"saveAs\"\n        when 'rename'\n          console.log \"rename\"\n        when 'delete'\n          console.log \"delete\"\n          if @props.data.isDirectory\n            msg = \"确定要删除文件夹 #{@props.data.name} 及其所有文件吗？\"\n          else\n            msg = \"确定要删除文件 #{@props.data.name} 吗？\"\n          return if not window.confirm msg\n          url = \"/delete#{@props.data.relativePath}\"\n          @_callApi \"get\",url,@props.onEvent.bind(null,'update')\n        else\n          console.error \"unsupported action type:\",action\n\n    _callApi:(method=\"get\",url,callback)->\n      method = method.toUpperCase()\n      $.ajax\n        method:method\n        url:url\n      .done (res)->\n        callback res\n      .fail (e)->\n        console.error e\n\n    handleClick:(e)->\n      @props.onEvent \"showDetail\",{itemData:@props.data}\n\n    handleContextMenu:(evt)->\n      evt.preventDefault()\n      evt.stopPropagation()\n      rect = ReactDOM.findDOMNode(@).getBoundingClientRect()\n      console.log evt.pageX,evt.pageY\n      @props.onEvent \"showContextMenu\",\n        menuItems: @contextMenuItems\n        itemData: @props.data\n        position: x:evt.pageX,y:evt.pageY\n\n    render:->\n      React.createElement(\"div\", {\"className\": \"file-panel-item file-item\",  \\\n        \"onClick\": (@handleClick.bind(@)),  \\\n        \"onContextMenu\": (@handleContextMenu.bind(@))},\n\n        React.createElement(\"div\", {\"className\": \"icon\"},\n          React.createElement(\"div\", {\"className\": \"preview\"}, \"File:\")\n        ),\n        React.createElement(\"p\", {\"className\": \"name\", \"tilte\": (@props.data.name)}, (@props.data.name))\n\n      )\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/cjsx-loader!./client/src/components/FileItem.cjsx\n **/","require '../styles/filesPanel.less'\nFileItem = require './FileItem'\n\nmodule.exports =\n  class ImageItem extends FileItem\n    render:->\n      src = \"/imgPreview#{@props.data.relativePath}\"\n      React.createElement(\"div\", {\"className\": \"file-panel-item image-item\",  \\\n        \"onClick\": (@handleClick.bind(@)),  \\\n        \"onContextMenu\": (@handleContextMenu.bind(@))},\n\n        React.createElement(\"div\", {\"className\": \"icon\"},\n          React.createElement(\"img\", {\"src\": (src), \"className\": \"preview\"})\n        ),\n        React.createElement(\"p\", {\"className\": \"name\", \"tilte\": (@props.data.name)}, (@props.data.name))\n\n      )\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/cjsx-loader!./client/src/components/ImageItem.cjsx\n **/","require '../styles/detailPanel.less'\n\nmodule.exports =\n  class DetailPanel extends React.Component\n    constructor:()->\n      super\n      @state = {itemData:null}\n\n    showDetail:(type,itemData)->\n      console.log \"showDetail\",type,itemData\n      @setState {itemType:type, itemData:itemData}\n\n    handleInnerClick:(evt)->\n      evt.stopPropagation()\n      evt.preventDefault()\n\n    dissmiss:(evt)->\n      @setState {itemData:null}\n\n    render:->\n      itemData = @state.itemData\n      if not itemData\n        return React.createElement(\"section\", {\"className\": \"hidden\"})\n      React.createElement(\"section\", {\"className\": \"detail-panel popup-layer\", \"onClick\": (@dissmiss.bind(@))},\n        React.createElement(\"button\", {\"className\": \"close-btn\", \"onClick\": (@dissmiss.bind(@))}, \"×\"),\n        (\n          ft = require('./FilesPanel').FileTypes\n          switch @state.itemType\n            when ft.image\n              src = \"/viewImage#{itemData.relativePath}\"\n              React.createElement(\"img\", {\"className\": \"content\", \"src\": (src), \"onClick\": (@handleInnerClick.bind(@))})\n            when ft.others\n              React.createElement(\"div\", {\"className\": \"content\", \"onClick\": (@handleInnerClick.bind(@))},\n                React.createElement(\"p\", null, (\"no preview for this file\"))\n              )\n        ),\n        React.createElement(\"span\", {\"className\": \"name\"}, (@state.itemData.name))\n      )\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/cjsx-loader!./client/src/components/DetailPanel.cjsx\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./client/src/styles/detailPanel.less\n ** module id = 12\n ** module chunks = 0\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./client/src/styles/menus.less\n ** module id = 18\n ** module chunks = 0\n **/","require '../styles/menus.less'\n\nmodule.exports =\n  class ContextMenu extends React.Component\n    @NameDict:\n      'rename':'重命名'\n      'download':'下载'\n      'saveAs':'另存为'\n      'delete':'删除'\n      'newDir':'创建文件夹'\n\n    constructor:()->\n      super\n      @state = {}\n\n    show:({menuItems,itemData,position})->\n      @setState items:menuItems,itemData:itemData,position:position\n\n    handleListItemClick:(key,evt)->\n      evt.stopPropagation()\n      console.log \"menu item clicked:\",key\n      @props.onItemClick itemData:@state.itemData,key:key\n      @dismiss()\n\n    dismiss:(evt)->\n      @setState items:null\n\n    render:->\n      if not @state.items or @state.items.length is 0\n        return React.createElement(\"section\", {\"className\": \"hidden\"})\n\n      pos = @state.position\n\n      React.createElement(\"section\", {\"className\": \"menu-wrapper popup-layer\", \"onClick\": (@dismiss.bind(@))},\n        React.createElement(\"ul\", {\"className\": \"menu item-context-menu\", \"style\": (left:pos.x,top:pos.y)},\n          (\n            for key in @state.items\n              React.createElement(\"li\", {\"key\": (key), \"onClick\": (@handleListItemClick.bind(@,key))},\n                (ContextMenu.NameDict[key])\n              )\n          )\n        )\n      )\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/cjsx-loader!./client/src/components/ContextMenu.cjsx\n **/","EventEmitter = Suzaku.EventEmitter\n\nUploader = require './Uploader'\n\nmodule.exports =\n  class FileUploadManager extends EventEmitter\n    constructor:(client)->\n      super\n\n    handleDragHtml:(currentDir,html)->\n      rootElem = $(\"<div>\" + html.replace(/<script/g,'<_script') + \"</div>\")\n      srcs = (img.src for img in rootElem.find(\"img\"))\n      console.log srcs\n      if srcs.length is 0 then return false\n      for url in srcs\n        $.post \"/grabImage#{currentDir}\",JSON.stringify {url:url}\n        .done (data)=>\n          @emit \"fileUploaded\"\n        .fail (e)=>\n          console.log \"error\",e\n\n    handleDragFiles:(currentDir,files)->\n      totalSize = 0\n      totalSize += f.size for f in files\n      console.log \"total file size is #{totalSize/1024/1024}MB\"\n      p = Promise.resolve()\n      Array::forEach.call files,(f)=>\n        p = p.then =>\n          @uploadFile(currentDir,f)\n      p.then (e)=>\n        console.log \"finished\"\n        @emit \"fileUploaded\"\n      .catch (e)->\n        console.error e.stack\n        console.error \"upload error\"\n\n    uploadFile:(currentDir,file)->\n      new Promise (resolve, reject)->\n        console.log \"start upload #{file.name}\"\n        uploader = new Uploader()\n        uploader.upload(currentDir,file)\n        uploader.on \"complete\",->\n          resolve()\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/src/FileUploadManager.coffee\n **/","EventEmitter = Suzaku.EventEmitter\n\nsize =\n  kb:1024\n  mb:1024 * 1024\n\nmodule.exports =\n  class Uploader extends EventEmitter\n    constructor:()->\n      super\n      @sliceSize = 3 * size.mb\n      #maxThreads = 3\n      @maxThreads = 2\n      @file = null\n      @availThreads = 0\n      @sliceCount = 0\n      @apiPath = null\n      @currentSlice = 0\n      @currentDir = \"/\"\n\n    upload:(@currentDir,@file)->\n      #check\n      xhr = new XMLHttpRequest()\n      xhr.open \"GET\",\"/check#{@currentDir}?filename=#{@file.name}&size=#{@file.size}\"\n      xhr.send()\n      xhr.onload = ()=>\n        @doUpload()\n      xhr.onerror = (e)=>\n        console.error e\n        @emit \"error\",e\n\n    doUpload:->\n      # r = new FileReader()\n      # r.readAsBinaryString @file\n      # r.onload = (e)=>\n      #   console.log r.result\n      #   @showResult r.result\n      #   r = null\n      @sliceCount = Math.ceil(@file.size/@sliceSize)\n      @availThreads = @maxThreads\n      console.log \"sliceCount is #{@sliceCount}\"\n      @currentSlice = 0\n      console.log \"got file #{@file.name} total size #{@file.size}\"\n      console.log \"uploading using sliceSize #{@sliceSize} and #{@maxThreads} threads\"\n\n      @on \"sliceProgress\",(slice,percentage)=>\n        #TODO calculate total progress\n        @emit \"progress\"\n\n      @on \"sliceComplete\",(slice)=>\n        @availThreads += 1\n        if slice < (@sliceCount - 1)\n          #still has slice to upload\n          @uploadNextSlice()\n        else if @availThreads is @maxThreads\n          #all slice has been uploaded\n          @emit \"complete\"\n\n      @uploadNextSlice()\n\n    uploadNextSlice:()->\n      return unless @currentSlice < @sliceCount and @availThreads > 0\n      @availThreads -= 1\n      @uploadSlice @currentSlice\n      @currentSlice += 1\n      @uploadNextSlice()\n\n    uploadSlice:(slice)->\n      return unless slice < @sliceCount\n      name = @file.name\n      start = slice * @sliceSize\n      stop = (slice + 1) * @sliceSize - 1\n      #console.log \"upload slice\",slice,start,\"~\",stop,\"availThreads #{@availThreads}\"\n      if stop > (@file.size - 1) then stop = @file.size - 1\n      bolb = @file.slice start,stop + 1\n\n      reader = new FileReader()\n      reader.readAsBinaryString bolb\n      reader.onloadend = (e)=>\n        if reader.readyState is FileReader.DONE\n          @emit \"onload\"\n          #@showResult reader.result\n          @sendAsBinary xhr,reader.result\n          #@showResult reader.result\n          reader = null\n\n      xhr = new XMLHttpRequest()\n      xhr.upload.onprogress = (evt)=>\n        if evt.lengthComputable\n          percentage = Math.round((evt.loaded * 100) / evt.total);\n          @emit \"sliceProgress\",slice,percentage\n      xhr.upload.onload = (e)=>\n        @emit \"sliceComplete\",slice\n      xhr.upload.onerror = (error)=>\n        @emit \"error\",error\n      url = \"/upload#{@currentDir}?start=#{start}&stop=#{stop}&filename=#{name}\"\n      xhr.open \"POST\",url\n\n    sendAsBinary:(xhr, data)->\n      @xhr = new XMLHttpRequest()\n      parts = new Uint8Array(data.length)\n      for i in [0..data.length-1]\n        parts[i] = data[i].charCodeAt(0)\n      xhr.send(parts.buffer)\n\n    showResult:(res, label)->\n      markup = []\n      for n in [0..(res.length-1)]\n        aByte = res.charCodeAt(n)\n        byteStr = aByte.toString(16)\n        if byteStr.length < 2\n          byteStr = \"0\" + byteStr\n        markup.push(byteStr)\n      console.log markup.join(\" \")\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/src/Uploader.coffee\n **/"],"sourceRoot":""}